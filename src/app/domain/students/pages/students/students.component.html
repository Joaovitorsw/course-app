<h1>Students</h1>
<div class="welcome-container">
  <p>
    Welcome to the students page. Here you can see all the students that are
    available.
  </p>
</div>
<section>
  @for (student of students(); track student.id) {
  <div class="card">
    <h2>Student</h2>
    <div class="user-info-container">
      <span>Username:</span
      ><span class="user-info">{{ student.username }}</span> <span>Name:</span
      ><span class="user-info">{{ student.name }}</span>
    </div>

    <div class="card-actions">
      <pulso-icon
        linear-tooltip="Edit Student"
        size="medium"
        class="edit"
        (click)="
          dialog.showModal();
          name.setValue(student.name);
          studentId.set(student.id)
        "
      >
        rdicon-edit-filled
      </pulso-icon>

      <pulso-switch
        [id]="student.id"
        linear-tooltip="Toggle active"
        [checked]="student.active"
        (change)="toggleActive(student)"
      >
      </pulso-switch>
    </div>
  </div>
  }
</section>
<dialog #dialog>
  <h1>Create a new Student</h1>
  <pulso-form-field>
    <pulso-mat-icon pulsoPrefix> signature </pulso-mat-icon>
    <label for="name">Name</label>
    <input
      autofocus
      [formControl]="name"
      type="text"
      autocomplete="new-password"
      required
    />
  </pulso-form-field>
  <div class="dialog-actions">
    <button
      pulso-button="primary"
      (click)="dialog.close(); onSubmit()"
      [disabled]="name.invalid"
    >
      {{ studentId() ? "Update" : "Create" }}
    </button>
    <button
      pulso-button="secondary"
      (click)="dialog.close(); name.reset(); studentId.set(0)"
    >
      Close
    </button>
  </div>
</dialog>
